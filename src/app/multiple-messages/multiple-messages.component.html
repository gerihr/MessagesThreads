<div>
  <div class="parent-box">
    <div class="child-box-{{i}}" *ngFor="let message of data, let i=index">
      <app-message-box [data]="message" [messageBar]="i==0 ? data.length : ''" *ngIf="isExpanded" (click)="isExpanded=false"></app-message-box>
    </div>
</div>

</div>

<div *ngIf="!isExpanded">
  <div *ngFor="let message of data">
    <app-message-box [data]="message"></app-message-box>
  </div>
</div>